@startuml
title Arquitectura Backend Medstrack - Enfoque en Seguridad

skinparam componentStyle uml2
skinparam packageStyle rectangle

actor "Cliente / Frontend" as Client

package "Capa de Presentación" {
  [UserController] as Controller
}

package "Capa de Negocio" {
  [UserService] as Service
  [SecurityUtils / BCrypt] as Crypto <<Security>>
}

package "Capa de Persistencia" {
  [UserRepository] as Repo
  database "PostgreSQL" as DB
}

' Flujo de trabajo
Client -> Controller : POST /register (DTO)
Controller -> Service : validate & process
Service -> Crypto : hashPassword(raw)
Crypto -> Service : hashed_password
Service -> Repo : save(UserEntity)
Repo -> DB : INSERT

note right of Crypto
  **BCrypt Hashing**
  * Generación de Salt
  * Hashing iterativo
  * No reversible
end note

@enduml
