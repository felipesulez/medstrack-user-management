<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="280px" preserveAspectRatio="none" style="width:1623px;height:280px;" version="1.1" viewBox="0 0 1623 280" width="1623px" zoomAndPan="magnify"><defs><filter height="300%" id="fkjfghtl15o9r" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="500" x="564.5" y="16.708">Arquitectura Backend Medstrack - Enfoque en Seguridad</text><!--MD5=[8b24e056424bec1f8cd813bc51b61745]
cluster Capa de Presentación--><polygon fill="#FFFFFF" filter="url(#fkjfghtl15o9r)" points="265,144.4531,444,144.4531,451,166.75,454,166.75,454,260.4531,265,260.4531,265,144.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="265" x2="451" y1="166.75" y2="166.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="269" y="159.4482">Capa de Presentación</text><!--MD5=[4c5fdb47441f8160a72fbce47f59b1f8]
cluster Capa de Negocio--><polygon fill="#FFFFFF" filter="url(#fkjfghtl15o9r)" points="478,135.9531,617,135.9531,624,158.25,966,158.25,966,268.9531,478,268.9531,478,135.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="478" x2="624" y1="158.25" y2="158.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="482" y="150.9482">Capa de Negocio</text><!--MD5=[46edcc7fb4af9520e27dd725747e0945]
cluster Capa de Persistencia--><polygon fill="#FFFFFF" filter="url(#fkjfghtl15o9r)" points="1077,144.4531,1249,144.4531,1256,166.75,1438,166.75,1438,260.4531,1077,260.4531,1077,144.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1077" x2="1256" y1="166.75" y2="166.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="1081" y="159.4482">Capa de Persistencia</text><!--MD5=[f855680bc6c989572ebb25245d27968d]
entity Controller--><rect fill="#FEFECE" filter="url(#fkjfghtl15o9r)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="298.5" y="198.4531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="417.5" y="203.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="415.5" y="205.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="415.5" y="209.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="313.5" y="231.4482">UserController</text><!--MD5=[17737e49c286898813382e12d6080e03]
entity Service--><rect fill="#FEFECE" filter="url(#fkjfghtl15o9r)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="828" y="198.4531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="930" y="203.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="928" y="205.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="928" y="209.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="843" y="231.4482">UserService</text><!--MD5=[db49e81f1cb80318d8bca3cc3b6197a9]
entity Crypto--><rect fill="#FEFECE" filter="url(#fkjfghtl15o9r)" height="62.5938" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="494.5" y="189.9531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="657.5" y="194.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="655.5" y="196.9531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="655.5" y="200.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="544" y="222.9482">«Security»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="509.5" y="239.2451">SecurityUtils / BCrypt</text><!--MD5=[b9043c2a9c0284b5105a937d12c4195f]
entity Repo--><rect fill="#FEFECE" filter="url(#fkjfghtl15o9r)" height="46.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="1093" y="198.4531"/><rect fill="#FEFECE" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="1219" y="203.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1217" y="205.4531"/><rect fill="#FEFECE" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1217" y="209.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="1108" y="231.4482">UserRepository</text><!--MD5=[f9ba5bf973e7832d2ce5ed59077b93f7]
entity DB--><path d="M1320.5,208.9531 C1320.5,198.9531 1371,198.9531 1371,198.9531 C1371,198.9531 1421.5,198.9531 1421.5,208.9531 L1421.5,234.25 C1421.5,244.25 1371,244.25 1371,244.25 C1371,244.25 1320.5,244.25 1320.5,234.25 L1320.5,208.9531 " fill="#FEFECE" filter="url(#fkjfghtl15o9r)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1320.5,208.9531 C1320.5,218.9531 1371,218.9531 1371,218.9531 C1371,218.9531 1421.5,218.9531 1421.5,208.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="1330.5" y="235.9482">PostgreSQL</text><!--MD5=[0ba5ee7700168656dc1b457c6fe9fdac]
entity Client--><ellipse cx="68" cy="190.4531" fill="#FEFECE" filter="url(#fkjfghtl15o9r)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M68,198.4531 L68,225.4531 M55,206.4531 L81,206.4531 M68,225.4531 L55,240.4531 M68,225.4531 L81,240.4531 " fill="none" filter="url(#fkjfghtl15o9r)" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="6" y="258.9482">Cliente / Frontend</text><path d="M1457,185.9531 L1457,256.4844 L1611,256.4844 L1611,195.9531 L1601,185.9531 L1457,185.9531 " fill="#FBFB77" filter="url(#fkjfghtl15o9r)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1601,185.9531 L1601,195.9531 L1611,195.9531 L1601,185.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="1463" y="203.02">BCrypt Hashing</text><ellipse cx="1468.5" cy="213.7188" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="1474" y="218.1528">Generación de Salt</text><ellipse cx="1468.5" cy="228.8516" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="1474" y="233.2856">Hashing iterativo</text><ellipse cx="1468.5" cy="243.9844" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="1474" y="248.4185">No reversible</text><!--MD5=[0ad5676fba4e3492423b87fa94798373]
link Client to Controller--><path d="M130.16,221.4531 C177.53,221.4531 242.95,221.4531 293.19,221.4531 " fill="none" id="Client-&gt;Controller" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="298.31,221.4531,289.31,217.4531,293.31,221.4531,289.31,225.4531,298.31,221.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="148.25" y="214.52">POST /register (DTO)</text><!--MD5=[6ee88e067ac5b020ca91296d15764b13]
link Controller to Service--><path d="M386.58,198.2131 C406.44,175.4131 440.2,142.0731 478,127.9531 C489.12,123.7931 680.9,124.0731 693.5,126.9531 C750.88,140.0931 811,172.3631 849.17,195.5331 " fill="none" id="Controller-&gt;Service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="853.71,198.3131,848.1217,190.2032,849.4454,195.703,843.9455,197.0266,853.71,198.3131" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="573.5" y="116.02">validate &amp; process</text><!--MD5=[6d40466750740b17e822e042369b766b]
link Service to Crypto--><path d="M827.76,221.4531 C786.21,221.4531 730.41,221.4531 682.89,221.4531 " fill="none" id="Service-&gt;Crypto" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="677.73,221.4531,686.73,225.4531,682.73,221.4531,686.73,217.4531,677.73,221.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="691.25" y="214.52">hashPassword(raw)</text><!--MD5=[d8e82733b1f9de6a760d41c1277f8466]
link Crypto to Service--><path d="M677.51,239.5131 C683.33,240.2731 689.11,240.9431 694.75,241.4531 C746.09,246.1331 759.6,247.8831 810.75,241.4531 C814.66,240.9631 818.66,240.3331 822.68,239.6131 " fill="none" id="Crypto-&gt;Service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="827.77,238.6431,818.1826,236.3888,822.8574,239.5741,819.6721,244.2489,827.77,238.6431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="695.75" y="237.52">hashed_password</text><!--MD5=[3e1b54b7b2aebf2272b30ff59903391e]
link Service to Repo--><path d="M950.13,221.4531 C990.71,221.4531 1044.33,221.4531 1087.98,221.4531 " fill="none" id="Service-&gt;Repo" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1092.98,221.4531,1083.98,217.4531,1087.98,221.4531,1083.98,225.4531,1092.98,221.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="968.5" y="237.52">save(UserEntity)</text><!--MD5=[46d09a0438ef343e299b6bb5c19a1112]
link Repo to DB--><path d="M1239.14,221.4531 C1264.16,221.4531 1291.72,221.4531 1315.15,221.4531 " fill="none" id="Repo-&gt;DB" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1320.39,221.4531,1311.39,217.4531,1315.39,221.4531,1311.39,225.4531,1320.39,221.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1257.25" y="214.52">INSERT</text><!--MD5=[b4c3f29ab514402bb57fde0360713557]
link Crypto to GMN17--><path d="M639.13,189.7931 C686.83,163.3331 759.71,127.6431 828.5,112.9531 C892.83,99.2231 1358.81,90.1331 1420.5,112.9531 C1457.7,126.7131 1489.28,159.8831 1509.61,185.9531 " fill="none" id="Crypto-GMN17" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[d7f57934ac1924b2a43329b8972369b1]
@startuml
title Arquitectura Backend Medstrack - Enfoque en Seguridad

skinparam componentStyle uml2
skinparam packageStyle rectangle

actor "Cliente / Frontend" as Client

package "Capa de Presentación" {
  [UserController] as Controller
}

package "Capa de Negocio" {
  [UserService] as Service
  [SecurityUtils / BCrypt] as Crypto <<Security>>
}

package "Capa de Persistencia" {
  [UserRepository] as Repo
  database "PostgreSQL" as DB
}

Client -> Controller : POST /register (DTO)
Controller -> Service : validate & process
Service -> Crypto : hashPassword(raw)
Crypto -> Service : hashed_password
Service -> Repo : save(UserEntity)
Repo -> DB : INSERT

note right of Crypto
  **BCrypt Hashing**
  * Generación de Salt
  * Hashing iterativo
  * No reversible
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.17+10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>