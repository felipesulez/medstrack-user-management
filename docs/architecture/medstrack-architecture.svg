<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="865px" preserveAspectRatio="none" style="width:519px;height:865px;" version="1.1" viewBox="0 0 519 865" width="519px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="446" x="40" y="16.708">Medstrack Backend - C4 Architecture (Run &amp; Test)</text><!--MD5=[e383df65917f9357a95fb9c1ad1e16e0]
cluster Medstrack Backend\n(Spring Boot)--><polygon fill="#FFFFFF" points="22,191.9531,182,191.9531,189,230.5469,242,230.5469,242,699.9531,22,699.9531,22,191.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="189" y1="230.5469" y2="230.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="26" y="206.9482">Medstrack Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="51" y="223.2451">(Spring Boot)</text><!--MD5=[06bd82e5b492608958b48858ad586d33]
cluster Controller Layer--><polygon fill="#FFFFFF" points="46,250.9531,180,250.9531,187,273.25,218,273.25,218,354.9531,46,354.9531,46,250.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="187" y1="273.25" y2="273.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="50" y="265.9482">Controller Layer</text><!--MD5=[167559344b6808c6e7281c72e5103d8e]
cluster Service Layer--><polygon fill="#FFFFFF" points="46,403.9531,160,403.9531,167,426.25,216,426.25,216,507.9531,46,507.9531,46,403.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="46" x2="167" y1="426.25" y2="426.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="50" y="418.9482">Service Layer</text><!--MD5=[10d0f23ee569ea40eeb72eb4536f1cc1]
cluster Persistence Layer--><polygon fill="#FFFFFF" points="47,571.9531,196,571.9531,203,594.25,215,594.25,215,675.9531,47,675.9531,47,571.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="47" x2="203" y1="594.25" y2="594.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="51" y="586.9482">Persistence Layer</text><!--MD5=[f855680bc6c989572ebb25245d27968d]
entity Controller--><rect fill="#FEFECE" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="62.5" y="285.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="57.5" y="290.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="57.5" y="328.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="72.5" y="308.9482">UsuarioController</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="72.5" y="325.2451">@RestController</text><!--MD5=[17737e49c286898813382e12d6080e03]
entity Service--><rect fill="#FEFECE" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="62" y="438.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="57" y="443.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="57" y="481.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="72" y="461.9482">UserService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="72" y="478.2451">@Business Logic</text><!--MD5=[4e260e4024c27e03c495c33059d2b5ff]
entity Repository--><rect fill="#FEFECE" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="63.5" y="606.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="58.5" y="611.9531"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="58.5" y="649.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="73.5" y="629.9482">UserRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="73.5" y="646.2451">(Spring Data JPA)</text><!--MD5=[0ba5ee7700168656dc1b457c6fe9fdac]
entity Client--><ellipse cx="132" cy="38.4531" fill="#FEFECE" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M132,46.4531 L132,73.4531 M119,54.4531 L145,54.4531 M132,73.4531 L119,88.4531 M132,73.4531 L145,88.4531 " fill="none" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="56.5" y="103.9482">API Client</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="56.5" y="120.2451">(Web / Mobile / Tests)</text><!--MD5=[f9ba5bf973e7832d2ce5ed59077b93f7]
entity DB--><path d="M58,782.4531 C58,772.4531 119,772.4531 119,772.4531 C119,772.4531 180,772.4531 180,782.4531 L180,824.0469 C180,834.0469 119,834.0469 119,834.0469 C119,834.0469 58,834.0469 58,824.0469 L58,782.4531 " fill="#FEFECE" style="stroke: #000000; stroke-width: 1.5;"/><path d="M58,782.4531 C58,792.4531 119,792.4531 119,792.4531 C119,792.4531 180,792.4531 180,782.4531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="68" y="809.4482">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="68" y="825.7451">User Database</text><path d="M258,276.9531 L258,308.9531 L201.67,312.9531 L258,316.9531 L258,347.4844 A0,0 0 0 0 258,347.4844 L428,347.4844 A0,0 0 0 0 428,347.4844 L428,286.9531 L418,276.9531 L258,276.9531 A0,0 0 0 0 258,276.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M418,276.9531 L418,286.9531 L428,286.9531 L418,276.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="264" y="294.02">Responsabilidad:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="264" y="309.1528">- Exponer API REST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="264" y="324.2856">- Validar DTOs (@Valid)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="264" y="339.4185">- Manejar HTTP status</text><path d="M258.5,429.9531 L258.5,461.9531 L200.19,465.9531 L258.5,469.9531 L258.5,500.4844 A0,0 0 0 0 258.5,500.4844 L507.5,500.4844 A0,0 0 0 0 507.5,500.4844 L507.5,439.9531 L497.5,429.9531 L258.5,429.9531 A0,0 0 0 0 258.5,429.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M497.5,429.9531 L497.5,439.9531 L507.5,439.9531 L497.5,429.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="264.5" y="447.02">Responsabilidad:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="264.5" y="462.1528">- Reglas de negocio</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="264.5" y="477.2856">- Validación de duplicados</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="264.5" y="492.4185">- Encriptación de password (BCrypt)</text><path d="M265.5,597.9531 L265.5,668.4844 L430.5,668.4844 L430.5,607.9531 L420.5,597.9531 L265.5,597.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M420.5,597.9531 L420.5,607.9531 L430.5,607.9531 L420.5,597.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="271.5" y="615.02">Responsabilidad:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="271.5" y="630.1528">- Acceso a datos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="271.5" y="645.2856">- Abstracción JPA</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="271.5" y="660.4185">- Sin lógica de negocio</text><path d="M220,752.9531 L220,853.75 A0,0 0 0 0 220,853.75 L488,853.75 A0,0 0 0 0 488,853.75 L488,762.9531 L478,752.9531 L352,752.9531 L348,669.0931 L344,752.9531 L220,752.9531 A0,0 0 0 0 220,752.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M478,752.9531 L478,762.9531 L488,762.9531 L478,752.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="226" y="770.02">Commit: "desconocido"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="226" y="785.1528">Build date: "desconocido"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="230" y="800.2856"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="226" y="815.4185">✔ Arquitectura en capas</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="226" y="830.5513">✔ Alineada con C4 Model</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="226" y="845.6841">✔ Enfocada en testabilidad y evolución</text><!--MD5=[0ad5676fba4e3492423b87fa94798373]
link Client to Controller--><path d="M132,124.2131 C132,124.2131 132,280.6831 132,280.6831 " fill="none" id="Client-&gt;Controller" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="132,285.6831,136,276.6831,132,280.6831,128,276.6831,132,285.6831" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="165" y="157.02">HTTP POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="133" y="172.1528">/api/usuarios/registro</text><!--MD5=[6ee88e067ac5b020ca91296d15764b13]
link Controller to Service--><path d="M131.25,339.1031 C131.25,339.1031 131.25,433.8531 131.25,433.8531 " fill="none" id="Controller-&gt;Service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="131.25,438.8531,135.25,429.8531,131.25,433.8531,127.25,429.8531,131.25,438.8531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="91" y="384.02">registrarUsuario(dto)</text><!--MD5=[81f86c4a65986ff24d640374da06d0c2]
link Service to Repository--><path d="M131,492.0731 C131,492.0731 131,601.6831 131,601.6831 " fill="none" id="Service-&gt;Repository" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="131,606.6831,135,597.6831,131,601.6831,127,597.6831,131,606.6831" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="132" y="537.02">findByCorreo()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="158" y="552.1528">save()</text><!--MD5=[3a47e7d28797ea190da5f3d4ddc4e298]
link Repository to DB--><path d="M121.75,660.0131 C121.75,660.0131 121.75,767.1731 121.75,767.1731 " fill="none" id="Repository-&gt;DB" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="121.75,772.1731,125.75,763.1731,121.75,767.1731,117.75,763.1731,121.75,772.1731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="120" y="729.02">CRUD (JPA/Hibernate)</text><!--MD5=[97b2cc628bf69d64596b26bf44262c88]
link Repository to GMN21--><path d="M198.77,633.9531 C219.91,633.9531 243.46,633.9531 265.5,633.9531 " fill="none" id="Repository-GMN21" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[7937e15b0aefd9d01c310aba665a6b5a]
@startuml

skinparam linetype ortho
skinparam nodesep 40
skinparam ranksep 40
skinparam packageStyle rectangle
skinparam shadowing false

title Medstrack Backend - C4 Architecture (Run & Test)

actor "API Client\n(Web / Mobile / Tests)" as Client

package "Medstrack Backend\n(Spring Boot)" {

  package "Controller Layer" {
    component "UsuarioController\n@RestController" as Controller
  }

  package "Service Layer" {
    component "UserService\n@Business Logic" as Service
  }

  package "Persistence Layer" {
    component "UserRepository\n(Spring Data JPA)" as Repository
  }
}

database "PostgreSQL\nUser Database" as DB

Client - -> Controller : HTTP POST\n/api/usuarios/registro
Controller - -> Service : registrarUsuario(dto)
Service - -> Repository : findByCorreo()\nsave()
Repository - -> DB : CRUD (JPA/Hibernate)

note right of Controller
  Responsabilidad:
  - Exponer API REST
  - Validar DTOs (@Valid)
  - Manejar HTTP status
end note

note right of Service
  Responsabilidad:
  - Reglas de negocio
  - Validación de duplicados
  - Encriptación de password (BCrypt)
end note

note right of Repository
  Responsabilidad:
  - Acceso a datos
  - Abstracción JPA
  - Sin lógica de negocio
end note

note bottom
  Commit: "desconocido"
  Build date: "desconocido"

  ✔ Arquitectura en capas
  ✔ Alineada con C4 Model
  ✔ Enfocada en testabilidad y evolución
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.17+10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>